{"version":3,"sources":["webpack:///./src/pages/effects-pedals/posts/building-a-vactrol-vca-mdx.mdx","webpack:///./src/pages/effects-pedals/posts/building-a-vactrol-vca.js","webpack:///./src/component/Disqus.jsx","webpack:///./src/component/Youtube.jsx","webpack:///./src/shape/ContentNav.jsx","webpack:///./src/content/shoosh-layout.png","webpack:///./src/content/shoosh-schematic.png","webpack:///./src/content/shoosh-breadboard.jpg","webpack:///./src/content/shoosh-vero.jpg","webpack:///./src/content/shoosh-done.jpg"],"names":["_frontmatter","layoutProps","MDXLayout","MDXContent","components","props","mdxType","src","ShooshBreadboard","alt","parentName","to","href","ShooshSchematic","target","ShooshLayout","ShooshVero","ShooshDone","isMDXComponent","title","modifier","content","pageNav","id","frameBorder","allowFullScreen","nav","className","module","exports"],"mappings":"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","file":"component---src-pages-effects-pedals-posts-building-a-vactrol-vca-js-7bf5ab32e89c14123ee5.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport { Link as HtmlLink } from 'dcme-style/src/deprecated';\nimport { Image } from 'dcme-style/src/deprecated';\nimport Disqus from '../../../component/Disqus';\nimport Link from '../../../component/Link';\nimport Youtube from '../../../component/Youtube';\nimport ShooshBreadboard from '../../../content/shoosh-breadboard.jpg';\nimport ShooshVero from '../../../content/shoosh-vero.jpg';\nimport ShooshDone from '../../../content/shoosh-done.jpg';\nimport ShooshLayout from '../../../content/shoosh-layout.png';\nimport ShooshSchematic from '../../../content/shoosh-schematic.png';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\";\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"building-a-vactrol-vca\"\n    }}>{`Building a Vactrol VCA`}</h1>\n    <p>{`Voltage Controlled Amplifiers (or \"VCAs\") are a common component in modular synthesizers. They're basically a volume control that can be set using a reference voltage. In a modular synth their primary job is make notes start and end, the volume is to raise when a key is pressed, and it's told to lower again when a key is released. The VCA simply reads the control voltage provided to it (often from 0V to 10V), and makes the audio signal quieter the closer the control voltage is to zero.`}</p>\n    <Image src={ShooshBreadboard} alt=\"Shoosh on a breadboard\" mdxType=\"Image\" />\n    <p>{`In the world of guitars you might not see much point in one of these, but altering the volume of a signal is the basis for tremolo pedals, the feedback and blend controls in delay pedals, and it provides compressors with their ability to squeeze. Control voltages (\"CVs\") can open up some crazy possibilities; plug a low frequency oscillator (\"LFO\") into one of these VCAs and you've got a tremolo effect that can cut your guitar sound in `}<em parentName=\"p\">{`any shape that the LFO can come up with`}</em>{`. I've found VCAs most useful as components within other effects.`}</p>\n    <p>{`Why vactrols? They're known to introduce minimum levels of noise compared to other types of VCA and they're easy to set up. You wouldn't use them for everything - their response is very non-linear, they differ from one another, and they are a little slow to turn on and off. But they are very well suited for volume controls, tremolo pedals and compressors.`}</p>\n    <p>{`##The \"Shoosh\" vactrol VCA circuit\nHere's the circuit I came up with and used in the `}<Link to=\"/effects-pedals\" mdxType=\"Link\">{`Shoosh`}</Link>{`. A CV from 0-5V will attenuate the audio signal from silent to a level determined by the gain pot. 0-5V is a standard control voltage range for guitar pedals.`}</p>\n    <h3 {...{\n      \"id\": \"shoosh-schematic\"\n    }}>{`Shoosh schematic`}</h3>\n    <HtmlLink href={ShooshSchematic} target=\"_blank\" mdxType=\"HtmlLink\">\n    <Image src={ShooshSchematic} mdxType=\"Image\" />\n    </HtmlLink>\n    <h3 {...{\n      \"id\": \"shoosh-veroboard-layout\"\n    }}>{`Shoosh veroboard layout`}</h3>\n    <HtmlLink href={ShooshLayout} target=\"_blank\" mdxType=\"HtmlLink\">\n    <Image src={ShooshLayout} mdxType=\"Image\" />\n    </HtmlLink>\n    <h2 {...{\n      \"id\": \"the-amplifier\"\n    }}>{`The amplifier`}</h2>\n    <p>{`Let's first follow the signal through the amplifier section. It's basically an op-amp buffer followed by an inverting op-amp to change the audio volume.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The audio signal moves through the input capacitor C1 and enters op-amp 1 (IC1).`}</li>\n      <li parentName=\"ul\">{`Op-amp 1 is a simple buffer, a non-inverting amplifier with unity gain. It doesn't change the volume. This will keep the input impedance of the pedal high, and ensure that op-amp 2 sees a predictable low impedance source.`}</li>\n      <li parentName=\"ul\">{`The signal leaves op-amp 1 and goes through the resistor end of the vactrol, encountering some resistance.`}</li>\n      <li parentName=\"ul\">{`The signal enters op-amp 2. This op amp, the resistor end of the vactrol and the gain pot collectively form an inverting amplifier with variable gain. The gain level is controlled both by the resistance through the vactrol, and the amount of resistance provided by the gain pot. Amount of gain = gain pot resistance / vactrol resistance.`}</li>\n      <li parentName=\"ul\">{`The signal leaves op-amp 2, flows though the output capacitor C2 and away.`}</li>\n    </ul>\n    <p>{`A single TL072 is a perfect choice for these two op-amps. They're good for audio applications and cheap.`}</p>\n    <p>{`So `}<strong parentName=\"p\">{`less vactrol resistance = more volume`}</strong>{`.`}</p>\n    <h2 {...{\n      \"id\": \"the-vactrol\"\n    }}>{`The vactrol`}</h2>\n    <p>{`Vactrols (or optocouplers, or a dozen other names) are made from an LED pointing straight into a light-dependent resistor (\"LDR\"), encased in plastic. In fact you can make them yourself by getting an LED, pointing it at an LDR and engulfing them in heat shrink tubing or electrical tape so no external light can get in. I prefer buying them because their properties are more predictable, you can choose the ones that have the right turn on and turn off times, and when they're off they have `}<em parentName=\"p\">{`very`}</em>{` high resistance which is essential for the amplifier to make a signal completely silent. I usually go with VTL5C1s, they're quite quick and go very dark.`}</p>\n    <p>{`The brighter the LED glows, the less resistance the LDR has. That gives us a variable resistor. That's just what we need for op-amp 2 to have variable gain.`}</p>\n    <p>{`So `}<strong parentName=\"p\">{`more LED brightness = less vactrol resistance`}</strong>{`.`}</p>\n    <p>{`Now you might be thinking:`}</p>\n    <p>{`More voltage into the vactrol = more LED brightness, right?`}</p>\n    <p>{`Well not exactly. It's possible but it's difficult. LEDs have a minimum voltage before they turn on. Usually anything less than about 1.2V makes no light, and beyond that LEDs brighten up quickly with additional voltage and then get only marginally brighter with added voltage. It's far better to control LED brightness using variations in current, not voltage.`}</p>\n    <p>{`We also don't want the CV to be responsible for actually providing power to any parts of this pedal. It's merely a voltage `}<em parentName=\"p\">{`reference`}</em>{`. Things that generate CVs such as envelope generators or low frequency oscillators would typically not be designed to be used as a current source.`}</p>\n    <p>{`Also remember that the LEDs in a vactrols follow all the same rules as normal LEDs. Give them too much current and they might die, and remember to plug them in the right way around.`}</p>\n    <p>{`So let's go with `}<strong parentName=\"p\">{`more LED current = more LED brightness`}</strong>{`.`}</p>\n    <p>{`But now we need to turn voltage into current. Voltage-to-current signal conversion.`}</p>\n    <h2 {...{\n      \"id\": \"the-transconductance-amplifier\"\n    }}>{`The transconductance amplifier`}</h2>\n    <p>{`Certainly sounds impressive. It's a simple op-amp circuit that essentially turns a reference voltage into a corresponding current. Put the vactrol's LED in the loop (anode to the op-amp's output and cathode to the op-amp's negative input), add the R4 resistor to ground and you can then control the LED brightness with a control voltage delivered to the op-amp's positive input.`}</p>\n    <p>{`Allaboutcircuits.com has a `}<a parentName=\"p\" {...{\n        \"href\": \"http://www.allaboutcircuits.com/textbook/semiconductors/chpt-8/voltage-to-current-signal-conversion/\",\n        \"target\": \"_blank\",\n        \"rel\": [\"nofollow\", \"noopener\", \"noreferrer\"]\n      }}>{`great article on these`}<span parentName=\"a\">{`(opens in a new window)`}</span></a>{`.`}</p>\n    <p>{`So finally, `}<strong parentName=\"p\">{`more control voltage = more LED current`}</strong>{`.`}</p>\n    <p>{`You will need a rail-to-rail op-amp. Normal op-amps can't output a voltage too close to either rail, but our CV will go all the way down to ground, so your op-amp will have to as well. I use TLC2272s, many others are available.`}</p>\n    <p>{`The resistor R4 determines how much current will be generated for a given voltage at the op-amp's positive input. Smaller values make more current for a given voltage. This lets you scale your vactrol's non-linear response curve against your CV. But keep in mind that smaller values make you lose headroom. Watch out for clipping in the output audio.`}</p>\n    <h2 {...{\n      \"id\": \"other-notes\"\n    }}>{`Other notes`}</h2>\n    <ul>\n      <li parentName=\"ul\">{`R5 and R6 provide us with a 4.5V voltage reference (Vref) so op amp 1 and 2 are biased correctly. This uses op amp 4 (IC4) which is set up as a simple buffer. On many other circuits this buffer isn't really required, but on this circuit if you turn the CV all the way down, the vactrol gets so dark (over 2M) in comparison to R2 that audio begins to leak back through the Vref path and through the output. The buffer prevents this from happening.`}</li>\n      <li parentName=\"ul\">{`R1 and R3 are in place to ensure that both the input and outputs don't float if this effect is being bypassed. Floating inputs and outputs often create a big pop when turning an effect back on by pressing the bypass footswitch.`}</li>\n      <li parentName=\"ul\">{`C1 and C2 can be increased to let through more bass frequencies if desired.`}</li>\n      <li parentName=\"ul\">{`R7 is just there to ensure that a CV of 0 will be detected if there's nothing plugged into the CV input.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"a-finished-build\"\n    }}>{`A finished build`}</h2>\n    <p>{`See an example over on the `}<Link to=\"/effects-pedals/shoosh\" mdxType=\"Link\">{`Shoosh pedal page`}</Link>{`.`}</p>\n    <Image src={ShooshVero} mdxType=\"Image\" />\n    <p>{`Completed prototype on vero.`}</p>\n    <Image src={ShooshDone} mdxType=\"Image\" />\n    <p>{`Boxed up and added to the pedal board. Please excuse the paint job.`}</p>\n    <Disqus mdxType=\"Disqus\" />\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","// @flow\nimport React from 'react';\nimport Layout from 'layout/Layout';\nimport Markdown from './building-a-vactrol-vca-mdx.mdx';\nimport ContentNav from 'shape/ContentNav';\n\nexport default () => <Layout\n    title=\"Building a Vactrol VCA\"\n    modifier=\"defaultBackground\"\n>\n    <ContentNav\n        content={() => <Markdown />}\n        pageNav={[\n            '# Building a Vactrol VCA',\n            'The amplifier',\n            'The vactrol',\n            'The transconductance amplifier',\n            'Other notes',\n            'A finished build'\n        ]}\n    />\n</Layout>;\n","// @flow\nimport React from 'react';\nexport default () => <div id=\"disqus_thread\" />;\n","// @flow\n\nimport type {Node} from 'react';\n\nimport React from 'react';\nimport {ResponsiveBox} from 'dcme-style/src/deprecated';\n\ntype Props = {\n    id: string\n};\n\nexport default ({id}: Props): Node => {\n    return <ResponsiveBox modifier=\"16-9\">\n        <iframe\n            src={`https://www.youtube.com/embed/${id}?rel=0`}\n            frameBorder=\"0\"\n            allowFullScreen\n        />\n    </ResponsiveBox>;\n};\n","// @flow\nimport React from 'react';\nimport {NavigationList} from 'dcme-style/src/deprecated';\nimport {NavigationListItem} from 'dcme-style/src/deprecated';\nimport {ContentNav} from 'dcme-style/src/deprecated';\nimport {Link} from 'dcme-style/src/deprecated';\n\nconst nav = () => <NavigationList>\n    <NavigationListItem>\n        <Link href=\"/\">damienclarke.me</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <a className=\"Link\" href=\"https://github.com/dxinteractive\">github</a>\n    </NavigationListItem>\n    <NavigationListItem>\n        <a className=\"Link\" href=\"mailto:dxinteractive@gmail.com\">dxinteractive@gmail.com</a>\n    </NavigationListItem>\n    <NavigationListItem modifier=\"section\">Stuff</NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/#Javascript-libraries\">Javascript libraries</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/#Effects-pedals\">Effects pedals</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/#Music\">Music</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/#Arduino-libraries\">Arduino libraries</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/#Animation\">Animation</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/#Old-Flash-Games\">Old Flash games</Link>\n    </NavigationListItem>\n    {/*<NavigationListItem modifier=\"section\">Effects Pedals</NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/effects-pedals/blend2\">Blend2</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/effects-pedals/shoosh\">Shoosh</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/effects-pedals/bazz-fuzz-face\">Bazz Fuzz Face</Link>\n    </NavigationListItem>\n    <NavigationListItem>\n        <Link href=\"/effects-pedals/dxlfo\">DXLFO</Link>\n    </NavigationListItem>*/}\n</NavigationList>;\n\nexport default (props: any) => <ContentNav nav={nav} {...props} />;\n","module.exports = __webpack_public_path__ + \"static/shoosh-layout-39e60f058136eaa93589ca4b6d59360e.png\";","module.exports = __webpack_public_path__ + \"static/shoosh-schematic-56b23e86cd6b2b9f7ef41e93d9a65cee.png\";","module.exports = __webpack_public_path__ + \"static/shoosh-breadboard-7e875f0b3a591d421599138dd94a6f26.jpg\";","module.exports = __webpack_public_path__ + \"static/shoosh-vero-a95caa9974019ac125a23f8657194f13.jpg\";","module.exports = __webpack_public_path__ + \"static/shoosh-done-2a6c084b7c2138c4cb6430af48ffb59d.jpg\";"],"sourceRoot":""}